"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7846],{97846:function(e,o,n){n.r(o),n.d(o,{GridView:function(){return B},default:function(){return P}});var i=n(29901),l=n(24161),t=n(59715),a=n(62295),s=n(46717),r=n(83849),d=n.n(r),c=n(90410),u=n(45158),f=n(43601),h=n(35948),p=n(61250),m=(0,s.zo)("button",{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:32,fontSize:14,fontWeight:700,padding:"4px 12px",borderRadius:8,backgroundColor:"#00C1A2",border:"none",color:"#FFF",cursor:"pointer",transition:"all 0.3s ease-in-out","&:hover":{backgroundColor:"#00C1A2"},"&:focus":{outline:"none"},"&:active":{backgroundColor:"#00C1A2"}}),v=function(e){var o=e.workspaceId,n=(0,t.SS)(a.AD.FILE_UPLOAD_LIMIT),l=(0,f.Z)({workspaceId:o}).onClick,s=(0,h.g)(o).planName,r=(0,i.useState)(!1),c=r[0],u=r[1],v=(0,i.useCallback)((function(){u(!0)}),[]),C=(0,i.useCallback)((function(){u(!1)}),[]);return(0,p.jsx)("div",{onMouseEnter:v,onMouseLeave:C,className:d()({"absolute top-0 bottom-0 left-0 right-0 w-full h-full z-10 rounded-md":!0}),children:c&&(0,p.jsxs)("div",{className:"flex flex-col items-center h-full p-5 space-y-5 bg-white border rounded-md border-gray-50 bg-opacity-90",children:[(0,p.jsxs)("div",{className:"text-sm text-gray-700 line-clamp-5",children:["You can only access your ",n.value," most recently created files on your current ",s,". Upgrade to access all your files."]}),(0,p.jsx)(m,{onClick:l,children:"Upgrade"})]})})},C=function(e){var o,n,i,l,t,a,s,r=e.animation,d=e.disableMenu,f=e.isSelected,h=e.onClick,m=e.onSelectionChange,C=e.selectable,w=e.selectionMode,b=e.showAddToCollection,g=e.showStatus,x=void 0===g||g,k=e.showUpdatedUser,j=e.workspaceId,M=(0,u.Q)(j);return(0,p.jsxs)("div",{className:"relative rounded-md",children:[M.length>0&&!M.includes(r.id)&&(0,p.jsx)(v,{workspaceId:r.project.workspaceId}),(0,p.jsx)(c.K,{scopes:r.animationPermissionScopes,animation:r,backgroundColor:r.backgroundColor,thumbnail:null===(o=r.fileObject)||void 0===o||null===(n=o.thumbnails)||void 0===n||null===(i=n.webp)||void 0===i||null===(l=i.medium)||void 0===l?void 0:l.url,title:r.name,url:null===(t=r.fileObject)||void 0===t?void 0:t.url,showUpdatedUser:k,username:r.modifiedBy?r.modifiedBy.name:null===(a=r.createdBy)||void 0===a?void 0:a.name,project:null===(s=r.project)||void 0===s?void 0:s.title,date:r.updatedAt,selectable:C,selected:f,onSelectionChange:m,selectionMode:w,showStatus:x,status:r.status,onClick:h,disableMenu:d,showAddToCollection:b,upgradeRequired:M.length>0&&!M.includes(r.id)})]})},w=n(55312),b=n(24642),g=n.n(b),x=n(88406),k=n(42503),j=n(64229),M=n(50719),y=n(30891),I=n(93065),S=n(41404),L=n(13485),A=(0,x.default)((0,w.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(7255),n.e(7767),n.e(2762),n.e(9421),n.e(8509),n.e(5452),n.e(6540),n.e(4172),n.e(2430),n.e(676)]).then(n.bind(n,76189)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[76189]},modules:["../components/ui/cards/creator-card.tsx -> @/components/ui/cards/file-card-metadata"]}}),N=function(e){var o,n,l,t,a,s,r,c,u,f,h,m=e.disableMenu,v=void 0!==m&&m,C=e.file,w=e.isSelected,b=void 0!==w&&w,g=e.onClick,x=e.onSelectionChange,N=e.selectable,_=void 0!==N&&N,E=e.selectionMode,D=void 0!==E&&E,U=(0,i.useState)(!1),F=U[0],B=U[1],P=(0,i.useState)(!1),T=P[0],Z=P[1],O=(0,I.a)({scopes:C.animationPermissionScopes||[]}).canFullAccess,q=(0,i.useCallback)((function(){Z(!1)}),[]),H=(0,i.useCallback)((function(){x&&x()}),[x]),K=(0,i.useCallback)((function(){B(!0)}),[B]),R=(0,i.useCallback)((function(){B(!1)}),[B]),V=(0,i.useCallback)((function(){O()&&Z(!0)}),[O]),z=(0,i.useCallback)((function(e){if(D&&x)x();else if(g){var o=L.Mq?e.metaKey:e.ctrlKey;g(o)}}),[x,g,D]),Q=(0,i.useCallback)((function(e){if("Space"===e.key)if(D&&x)x();else if(g){var o=L.Mq?e.metaKey:e.ctrlKey;g(o)}}),[g,x,D]),W=(0,S.h)(z,V);return(0,p.jsxs)("div",{className:"relative z-0 group w-full aspect-square",onMouseEnter:K,onMouseLeave:R,children:[(0,p.jsx)("svg",{className:d()("absolute inset-0 w-full h-full",{"creator-drop-shadow":F}),xmlns:"http://www.w3.org/2000/svg",width:"210",height:"210",viewBox:"0 0 210 210",fill:"none",children:(0,p.jsx)("path",{fill:"white",id:"Vector_2",d:"M190.984 18.3777C173.641 1.0344 173.944 0.522461 172.377 0.522461H6.79014C3.33193 0.522461 0.521484 3.33291 0.521484 6.79112V203.209C0.521484 206.667 3.33193 209.478 6.79014 209.478H203.208C206.666 209.478 209.477 206.667 209.477 203.209V37.6225C209.477 35.721 208.662 36.0553 190.995 18.3881",stroke:"rgba(217, 224, 230, 1)"})}),(0,p.jsxs)("div",{className:"absolute inset-0 h-full w-full",children:[(0,p.jsxs)("div",{className:"w-full h-[calc(100%-3.5rem)] relative z-0 p-2",children:[(0,p.jsx)("div",{onKeyDown:Q,onClick:z,className:"absolute inset-0 z-10 cursor-pointer"}),(0,p.jsx)("div",{className:"h-full p-4 -mx-2 border-b border-gray-50",children:(0,p.jsx)("div",{className:"h-full mx-auto transparency-grid-square",children:(0,p.jsx)(j.y,{src:(null===(o=C.fileObject)||void 0===o||null===(n=o.thumbnails)||void 0===n||null===(l=n.webp)||void 0===l||null===(t=l.medium)||void 0===t?void 0:t.url)||(null===(a=C.fileObject)||void 0===a||null===(s=a.thumbnails)||void 0===s||null===(r=s.png)||void 0===r||null===(c=r.medium)||void 0===c?void 0:c.url)})})})]}),(0,p.jsx)(A,{showActionsMenu:F,animation:C,isMenuDisabled:v,onTitleClick:W,showFilledIcon:F,projectName:null===(u=C.project)||void 0===u?void 0:u.title,showAddToCollection:!1,title:C.name,updatedDate:C.updatedAt,showUpdatedUser:!0,username:C.modifiedBy?"".concat(null===(f=C.modifiedBy)||void 0===f?void 0:f.firstName):"".concat(null===(h=C.createdBy)||void 0===h?void 0:h.firstName)})]}),(0,p.jsxs)("svg",{className:d()("absolute inset-0 w-full h-full pointer-events-none",{"text-actionPrimary":b,"text-gray-100":!b}),xmlns:"http://www.w3.org/2000/svg",width:"210",height:"210",viewBox:"0 0 210 210",fill:"none",children:[(0,p.jsxs)("g",{"clip-path":"url(#clip0_5690_42434)",children:[(0,p.jsx)("path",{d:"M173.182 1.03418L173.213 24.1133C173.213 30.9043 178.719 36.4103 185.51 36.4103H208.84",fill:"white"}),(0,p.jsx)("path",{d:"M173.182 1.03418L173.213 24.1133C173.213 30.9043 178.719 36.4103 185.51 36.4103H208.84",stroke:"rgba(217, 224, 230, 1)"}),b?(0,p.jsx)("path",{d:"M190.5 19.5C190.5 19.5 174.067 2 172.5 2L6.99945 1.5C1.50057 1.5 1.50002 1.5 1.50002 6.79112L1.5 201.5C1.5 208.5 1.5 208.5 7 208.5H203C208.5 208.5 208.5 208.5 208.5 203.137V39.9853C208.5 38.394 207.868 36.8679 206.743 35.7426L190.5 19.5Z",stroke:"currentColor","stroke-width":"3"}):(0,p.jsx)("path",{fill:"none",stroke:"currentColor",d:"M190.984 18.3777C173.641 1.0344 173.944 0.522461 172.377 0.522461H6.79014C3.33193 0.522461 0.521484 3.33291 0.521484 6.79112V203.209C0.521484 206.667 3.33193 209.478 6.79014 209.478H203.208C206.666 209.478 209.477 206.667 209.477 203.209V37.6225C209.477 35.721 208.662 36.0553 190.995 18.3881"})]}),(0,p.jsx)("defs",{children:(0,p.jsx)("clipPath",{id:"clip0_5690_42434",children:(0,p.jsx)("rect",{width:"210",height:"210",fill:"white"})})})]}),(0,p.jsx)("div",{className:"absolute z-20 flex justify-between w-full pr-2 top-2 right-0",children:(0,p.jsx)(M.Z,{variant:"caption-1",tag:"div",className:"ml-auto",children:(F&&_||b||D)&&O()&&(0,p.jsx)(y.X,{label:"check-card",checked:b,onChange:H})})}),(0,p.jsx)(k.default,{show:T,animationId:C.id,animationName:C.name,close:q})]})},_=n(47381),E=n(49736),D=n(97643),U=n(89012),F=n(34916),B=function(e){var o=e.canLoadMore,n=void 0!==o&&o,t=e.files,a=e.isLoadingMore,s=void 0!==a&&a,r=e.onLoadMore,d=void 0===r?function(){}:r,c=e.onSelectionChange,u=e.onFolderDownloadAllClick,f=e.selectable,h=void 0!==f&&f,m=e.selectedAnimations,v=e.selectionMode,w=e.showUpdatedUser,b=void 0===w||w,g=e.showAddToCollection,x=void 0!==g&&g,k=e.showStatus,j=void 0===k||k,M=e.onItemClick,y=e.workspaceId,I=(0,l.useRecoilValue)(U.Y),S=(0,D.S)({onIntersecting:d}),L=(0,i.useCallback)((function(e){return function(){c&&c(e.id)}}),[c]),A=(0,i.useCallback)((function(e){return function(o){return M(e,o)}}),[M]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-6 lg:grid-cols-3 xl:grid-cols-4 xxl:grid-cols-5 2xl:grid-cols-5 3xl:grid-cols-6 4xl:grid-cols-7",children:[t.map((function(e){var o,n,i="file-card-".concat(e.id);return(0,F.qR)(e)?(0,p.jsx)(E.A,{onClick:A(e),title:e.name,username:(null===(o=e.modifiedBy)||void 0===o?void 0:o.name)||(null===(n=e.createdBy)||void 0===n?void 0:n.name),date:e.updatedAt,folder:e,filesCount:e.filesCount,scopes:e.animationPermissionScopes,onDownloadAllClick:u,selectable:h,selectionMode:v,onSelectionChange:L(e),isSelected:!!m&&Boolean(m.some((function(o){return o.id===e.id})))},i):(0,F.QR)(e)?(0,p.jsx)(C,{animation:e,showUpdatedUser:b,showStatus:j,selectable:h,isSelected:!!m&&Boolean(m.some((function(o){return o.id===e.id}))),onSelectionChange:L(e),selectionMode:v,onClick:A(e),disableMenu:I>0,showAddToCollection:x,workspaceId:y},i):(0,F.xK)(e)?(0,p.jsx)(N,{file:e,onClick:A(e),selectable:h,onSelectionChange:L(e),isSelected:!!m&&Boolean(m.includes(e)),disableMenu:I>0,selectionMode:v}):(0,p.jsx)(p.Fragment,{})})),s&&(0,p.jsx)(_.a,{type:"spinner"})]}),n&&!s&&(0,p.jsx)("span",{ref:S})]})},P=B},45158:function(e,o,n){n.d(o,{Q:function(){return c}});var i=n(89303),l=n(29901),t=n(389),a=n(98326),s=n(18807),r=n(80303),d=n(13485),c=function(e){var o=(0,a.hp)(e),n=(0,d.fK)(o),c=(0,t.aM)({query:s.Z$,pause:!e||!o||!n||n!==r.Q.FREE,variables:{workspaceId:e}}),u=(0,i.Z)(c,1)[0];return(0,l.useMemo)((function(){var e;return n===r.Q.FREE&&(null===(e=u.data)||void 0===e?void 0:e.fileIdsWithinLimit)||[]}),[u,n])}},43601:function(e,o,n){var i=n(89303),l=n(59715),t=n(62295),a=n(29901),s=n(389),r=n(98082),d=n(18807);o.Z=function(e){var o,n,c=e.workspaceId,u=(0,l.SS)(t.AD.FILE_UPLOAD_LIMIT),f=(0,s.aM)({query:d.wG,variables:{workspaceId:c},pause:!c}),h=null!==(o=null===(n=(0,i.Z)(f,1)[0].data)||void 0===n?void 0:n.fileCountByWorkspaceId)&&void 0!==o?o:0,p=u?Math.min(Math.round(h/u.value*100),100):0,m=p<80,v=p>=80&&p<=90,C=p>90,w=function(e,o){e.stopPropagation(),e.preventDefault(),m?(0,r.Z)({source:t.pj.FILE_UPLOAD_LIMIT,workspaceId:c,from:o}):v?(0,r.Z)({source:t.pj.FILE_UPLOAD_LIMIT_ALMOST_REACHED,workspaceId:c,from:o}):(0,r.Z)({source:t.pj.FILE_UPLOAD_LIMIT_EXCEEDED,workspaceId:c,from:o})};return(0,a.useMemo)((function(){return{fileCount:h,percentage:p,isDefaultState:m,isWarningState:v,isDangerState:C,onClick:w}}),[h,p,m,v,C,w])}}}]);