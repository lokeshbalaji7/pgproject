"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5202],{38887:function(e,n,t){t.d(n,{W:function(){return s}});t(29901);var r=t(34916),a=t(61250),s=[{label:"Shipped",value:r.nT.Shipped,icon:(0,a.jsx)("div",{className:"w-3.5 h-3.5 rounded-full bg-blue-500"})},{label:"Approved",value:r.nT.Approved,icon:(0,a.jsx)("div",{className:"w-3.5 h-3.5 rounded-full bg-green-300"})},{label:"Needs review",value:r.nT.NeedsReview,icon:(0,a.jsx)("div",{className:"w-3.5 h-3.5 rounded-full bg-orange-400"})},{label:"In progress",value:r.nT.InProgress,icon:(0,a.jsx)("div",{className:"w-3.5 h-3.5 rounded-full bg-purple-400"})},{label:"No status",value:"NoStatus",icon:(0,a.jsx)("div",{className:"w-3.5 h-3.5 rounded-full bg-white border border-gray-200"})}]},82385:function(e,n,t){t.d(n,{v:function(){return l}});var r=t(98951),a=t(51276),s=t(35863),o=t(40467),i=t(29901),c=t(61250),l=function(e){var n=e.date,t=(0,i.useState)(""),l=t[0],u=t[1],d=(0,i.useCallback)((function(){var e=new Date(n);(0,r.Z)(e)?u("today"):(0,a.Z)(e)?u("yesterday"):(0,s.Z)(e)?u("".concat((0,o.Z)(e,"d MMM"))):u("".concat((0,o.Z)(e,"yy/M/d")))}),[n]);return(0,i.useEffect)((function(){d()}),[d]),(0,c.jsx)("span",{children:l})}},90410:function(e,n,t){t.d(n,{K:function(){return A}});var r=t(55312),a=t(24642),s=t.n(a),o=t(83849),i=t.n(o),c=t(88406),l=t(29901),u=t(38887),d=t(20291),f=t(78429),m=t(64229),p=t(50719),h=t(30891),v=t(76049),b=t(93065),x=t(41404),j=t(18100),w=t(13485),g=t(61250),S=(0,c.default)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(2503).then(t.bind(t,42503)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[42503]},modules:["../components/ui/cards/animation-card.tsx -> @/components/ui/modals/rename-animation-modal"]}}),y=(0,c.default)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then(t.bind(t,76049)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[76049]},modules:["../components/ui/cards/animation-card.tsx -> @/components/ui/menus/animation-status-selector-v-2"]}}),k=(0,c.default)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(7255),t.e(7767),t.e(2762),t.e(9421),t.e(8509),t.e(5452),t.e(6540),t.e(4172),t.e(2430),t.e(296)]).then(t.bind(t,76189)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[76189]},modules:["../components/ui/cards/animation-card.tsx -> ./file-card-metadata"]}}),N=function(e){var n=e.isCollapsed,t=void 0!==n&&n,r=e.status,a=u.W.find((function(e){return e.value===r}));return r&&a?t?(0,g.jsx)("div",{className:"px-3 py-1 mt-1",children:a.icon}):(0,g.jsx)("div",{className:"px-1 text-gray-600 bg-gray-100 rounded-md",children:(0,g.jsxs)("div",{className:"flex items-center px-2 py-1 text-sm",children:[a.icon,(0,g.jsx)("p",{children:a.label})]})}):(0,g.jsx)(g.Fragment,{})},C=function(e){var n=e.hasFullAccess,t=e.isHovered,r=e.isInSelectionMode,a=e.isSelectable,s=e.isSelected,o=e.onCheckboxChange;return(0,g.jsx)("div",{className:"absolute right-0 z-20 top-2",children:(0,g.jsx)(p.Z,{variant:"caption-1",tag:"div",children:(t&&a||s||r)&&n&&(0,g.jsx)(h.X,{label:"check-card",checked:s,onChange:o})})})},O=function(e){var n=e.animation,t=e.backgroundColor,r=e.hasFullAccess,a=e.hasPlayerError,s=e.hasThumbnailError,o=e.isHovered,c=e.isInSelectionMode,u=e.isSelectable,h=e.isSelected,b=e.onCheckboxChange,x=e.onOverlayClick,w=e.onOverlayKeydown,S=e.onPlayerError,k=e.onThumbnailError,O=e.playerRef,A=e.playerRefCallback,I=e.showStatus,T=void 0===I||I,M=e.status,E=e.thumbnailSrc,P=e.title,_=e.url,D=O.current,Z=(0,j.sZ)(n.project.workspaceId),R=(0,l.useState)(!1),U=R[0],F=R[1];(0,l.useEffect)((function(){return D&&D.addEventListener("error",S),function(){D&&D.removeEventListener("error",S)}}),[D,O,S,o]);return(0,g.jsxs)("div",{className:"w-full h-[calc(100%-3.5rem)] select-none relative z-0 p-2",style:{backgroundColor:null!=t?t:"none"},children:[T&&(0,g.jsx)(y,{source:v.AnimationStatusSource.ANIMATION_CARD_DROPDOWN,featureService:Z,animationId:n.id,animationStatus:n.status,projectId:n.project.id,workspaceId:n.project.workspaceId,isSubMenu:!0,handleStatusSelectorChange:function(e){F(e)},dropdownOffset:8,customTrigger:(0,g.jsx)("div",{className:"absolute left-0 z-20 pl-2 cursor-pointer top-2",children:(0,g.jsx)(p.Z,{tag:"div",variant:"caption-1",children:o||U?(0,g.jsx)(N,{status:M}):(0,g.jsx)(N,{status:M,isCollapsed:!0})})})}),(0,g.jsx)(C,{hasFullAccess:r,isInSelectionMode:c,isSelectable:u,isSelected:h,onCheckboxChange:b,isHovered:o}),(0,g.jsx)("div",{onKeyDown:w,onClick:x,className:"absolute inset-0 z-10 cursor-pointer"}),(0,g.jsx)("div",{className:i()("mx-auto h-full",{hidden:!o&&E}),children:_&&!a?(0,g.jsx)(f.V,{autoplay:!1,loop:!0,src:_,playerRef:A}):(0,g.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,g.jsx)(d.p,{})})}),(0,g.jsx)("div",{className:i()("mx-auto h-full",{hidden:o||!E}),children:(0,g.jsx)(m.y,{src:E,onError:k,alt:P,hasError:s})})]})},A=function(e){var n=e.animation,t=e.backgroundColor,r=void 0===t?null:t,a=e.date,s=e.disableMenu,o=void 0!==s&&s,c=e.onClick,u=e.onSelectionChange,d=e.project,f=e.scopes,m=e.selectable,p=void 0!==m&&m,h=e.selected,v=void 0!==h&&h,j=e.selectionMode,y=void 0!==j&&j,N=e.showAddToCollection,C=e.showStatus,A=void 0===C||C,I=e.showUpdatedUser,T=void 0===I||I,M=e.status,E=e.thumbnail,P=e.title,_=e.upgradeRequired,D=e.url,Z=e.username,R=(0,l.useState)(!1),U=R[0],F=R[1],K=(0,b.a)({scopes:f||[]}).canFullAccess,H=(0,l.useState)(!1),L=H[0],W=H[1],z=(0,l.useState)(!1),q=z[0],G=z[1],B=(0,l.useState)(!1),J=B[0],V=B[1],X=(0,l.useRef)(null),Y=(0,l.useCallback)((function(e){e&&(X.current=e)}),[]),Q=(0,l.useCallback)((function(){var e;null===(e=X.current)||void 0===e||e.play(),F(!0)}),[X,F]),$=(0,l.useCallback)((function(){var e;null===(e=X.current)||void 0===e||e.pause(),F(!1)}),[X,F]),ee=(0,l.useCallback)((function(){u&&u()}),[u]),ne=(0,l.useCallback)((function(){W(!1)}),[]),te=(0,l.useCallback)((function(e){if(y&&u)u();else if(c){var n=w.Mq?e.metaKey:e.ctrlKey;c(n)}}),[u,c,y]),re=(0,l.useCallback)((function(e){if("Space"===e.key)if(y&&u)u();else if(c){var n=w.Mq?e.metaKey:e.ctrlKey;c(n)}}),[c,u,y]),ae=(0,l.useCallback)((function(){G(!0)}),[]),se=(0,l.useCallback)((function(){V(!0)}),[]),oe=(0,l.useCallback)((function(){K()&&W(!0)}),[K]),ie=(0,x.h)(te,oe);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:i()("relative w-full transition duration-100 ease-out bg-white border border-gray-100 rounded-md animation-card overflow-hidden group hover:lf-shadow-md",{"selected-card":v,"opacity-30":_}),onMouseEnter:Q,onMouseLeave:$,children:(0,g.jsxs)("div",{className:"animation",children:[(0,g.jsx)(O,{animation:n,backgroundColor:r,hasFullAccess:K(),isHovered:U,hasThumbnailError:q,hasPlayerError:J,isSelectable:p,isSelected:v,isInSelectionMode:y,showStatus:A,status:M,title:P,thumbnailSrc:E,url:D,playerRefCallback:Y,playerRef:X,onCheckboxChange:ee,onOverlayClick:te,onOverlayKeydown:re,onPlayerError:se,onThumbnailError:ae}),(0,g.jsx)(k,{animation:n,isMenuDisabled:o,onTitleClick:ie,projectName:d,showAddToCollection:Boolean(N),showUpdatedUser:T,title:P,updatedDate:a,username:Z,showActionsMenu:U,showFilledIcon:U})]})}),(0,g.jsx)(S,{show:L,animationId:n.id,animationName:n.name,close:ne})]})}},76049:function(e,n,t){t.r(n),t.d(n,{AnimationStatusSource:function(){return r},AnimationStatusSelector:function(){return S}});var r,a=t(55312),s=t(77916),o=t(89303),i=t(24642),c=t.n(i),l=t(26766),u=t(62295),d=t(29901),f=t(389),m=t(18807),p=t(31869),h=t(99897),v=t(98082),b=t(38887),x=t(37576),j=t(61250);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.ANIMATION_CARD_DROPDOWN="animation_card_dropdown",e.ANIMATION_DETAILS="animation_details",e.SELECTION_BAR="selection_bar"}(r||(r={}));var S=function(e){var n=e.animationId,t=e.animationStatus,r=e.customTrigger,s=e.disabled,i=void 0!==s&&s,w=e.dropdownOffset,S=e.featureService,y=e.handleStatusSelectorChange,k=e.isSubMenu,N=void 0!==k&&k,C=e.projectId,O=e.source,A=e.workspaceId,I=(0,f.Db)(m.v3),T=(0,o.Z)(I,2)[1],M=(0,x.p)(),E=(0,d.useMemo)((function(){return b.W.map((function(e){return g(g({},e),{},{selected:!1})}))}),[]),P=(0,d.useCallback)(function(){var e=(0,a.Z)(c().mark((function e(r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({id:n,status:r});case 2:e.sent.error||null==M||M.pushSuccess("Status updated"),(0,l.Z9)(new l.Yk({fileId:n,oldStatus:t,newStatus:r,projectId:C,workspaceId:A,source:O}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[T,n,t,C,A,M,O]),_=(0,d.useMemo)((function(){return E.find((function(e){return e.value===t}))||E[E.length-1]}),[t,E]),D=(0,d.useMemo)((function(){return r?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(p.f.Trigger,{asChild:!0,children:r})}):(0,j.jsx)(j.Fragment,{children:N?(0,j.jsxs)(p.f.Trigger,{disabled:i,type:"menu-item",className:"disabled:opacity-30",children:[(0,j.jsx)("div",{className:"flex items-center justify-center w-6 h-6 mr-2 ",children:null==_?void 0:_.icon}),(0,j.jsx)("div",{className:"flex-grow text-sm",children:null==_?void 0:_.label}),!S.canUpdateAnimationStatus()&&(0,j.jsx)(v.y,{iconOnly:!0,className:"ml-2",source:u.Hh.UPDATE_ANIMATION_STATUS,workspaceId:A}),(0,j.jsx)("div",{className:"flex items-center text-gray-500",children:(0,j.jsx)(h.J,{name:"chevron-right"})})]}):(0,j.jsxs)(p.f.Trigger,{disabled:i,type:"text",className:"disabled:opacity-30",children:[(0,j.jsx)("div",{className:"mr-2",children:null==_?void 0:_.icon}),(0,j.jsx)("div",{className:"flex-grow text-sm",children:null==_?void 0:_.label}),!S.canUpdateAnimationStatus()&&(0,j.jsx)(v.y,{iconOnly:!0,className:"ml-2",source:u.Hh.UPDATE_ANIMATION_STATUS,workspaceId:A}),(0,j.jsx)("div",{className:"flex items-center text-gray-500",children:(0,j.jsx)(h.J,{name:"chevron-down-fill",small:!0,marginLeft:!0})})]})})}),[r,N,i,null==_?void 0:_.icon,null==_?void 0:_.label,S,A]);return(0,j.jsxs)(p.f,{onOpenChange:y,children:[D,(0,j.jsx)(p.f.Content,{sideOffset:w||0,alignOffset:w||0,side:"bottom",align:"start",children:E.map((function(e){return(0,j.jsxs)(p.f.Item,{onSelect:(0,a.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!S.canUpdateAnimationStatus()){n.next=5;break}return n.next=3,P("NoStatus"===e.value?null:e.value);case 3:n.next=6;break;case 5:(0,v.Z)({source:u.Hh.UPDATE_ANIMATION_STATUS,workspaceId:A});case 6:case"end":return n.stop()}}),n)}))),children:[(0,j.jsx)("span",{className:"mr-2",children:e.icon}),(0,j.jsx)("span",{children:e.label})]},e.value)}))})]})};n.default=S},41404:function(e,n,t){t.d(n,{h:function(){return a}});var r=t(29901),a=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,a=(0,r.useRef)(0),s=(0,r.useRef)(null);return(0,r.useEffect)((function(){return function(){null!==s&&(clearTimeout(s.current),s.current=null)}}),[]),(0,r.useCallback)((function(r){if(null!==s.current&&(clearTimeout(s.current),s.current=null),a.current+=1,2===a.current)return n(r),void(a.current=0);s.current=setTimeout((function(){e(r),a.current=0,s.current=null}),t)}),[e,n,t])}}}]);