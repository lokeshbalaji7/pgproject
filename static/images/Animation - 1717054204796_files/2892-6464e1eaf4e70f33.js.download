"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2892,1957],{77492:function(e,n,t){t.d(n,{o:function(){return s}});var r=t(29901),o=t(24161),a=t(47642),i=t(47381),l=t(61250),s=r.forwardRef((function(e,n){var t=e.children,r=e.contentWrapperCssClasses,s=void 0===r?"flex-grow overflow-hidden":r,u=e.headerControl,c=e.headerWrapperCssClasses,d=void 0===c?"bg-white h-16 flex items-center px-6 border-b border-gray-100 flex-shrink-0":c,f=e.id,m=(0,o.useRecoilValue)(a.qx);return(0,l.jsxs)("div",{id:f,ref:n,"data-onboarding-watch":"create_menu_new_button",className:"absolute inset-0 flex flex-col w-full overflow-y-auto",children:[u&&(0,l.jsx)("div",{className:d,children:u}),m?(0,l.jsx)(i.a,{size:"lg"}):(0,l.jsx)("div",{className:s,children:t})]})}));s.displayName="PageScaffold"},96421:function(e,n,t){t.d(n,{s:function(){return s}});var r=t(89303),o=(t(29901),t(24161)),a=t(36243),i=t(28725),l=t(61250),s=function(){var e=(0,o.useRecoilState)(a.Hw),n=(0,r.Z)(e,2),t=n[0],s=n[1];return(0,l.jsx)(i.n,{icon:"bounding-box",title:"Bounding box",onClick:function(){s(!t)},iconColorClass:t?"text-actionPrimary":"text-gray-600"})}},40701:function(e,n,t){t.d(n,{p:function(){return a}});var r=t(79120),o=t(29901),a=function(e){var n=e.color;return(0,o.useMemo)((function(){try{return(0,r.H3)(n)>=.5}catch(e){return!1}}),[n])}},2892:function(e,n,t){t.r(n);var r=t(89303),o=t(55312),a=t(24642),i=t.n(a),l=t(59715),s=t(71108),u=t(26766),c=t(62295),d=t(83849),f=t.n(d),m=t(79120),p=t(77179),v=t.n(p),h=t(53341),x=t(88406),b=t(26929),w=t(29901),g=t(34742),k=t(24161),C=t(389),E=t(42668),y=t(77492),j=t(96421),O=t(63738),S=t(40699),I=t(60919),M=t(28725),N=t(37576),F=t(70553),T=t(93065),P=t(99729),R=t(83349),q=t(59407),L=t(36359),_=t(40701),A=t(48097),U=t(25044),Z=t(19470),D=t(11957),G=t(98326),B=t(18807),V=t(9725),K=t(48612),W=t(36243),z=t(13794),Q=t(47642),H=t(48319),J=t(24450),Y=t(95334),X=t(28942),$=t(30337),ee=t(61250),ne=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(7870).then(t.bind(t,97870)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[97870]},modules:["animation/[id].tsx -> @/components/features/upload/editor-handback-container"]}}),te=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(2762),t.e(1809)]).then(t.bind(t,99547)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[99547]},modules:["animation/[id].tsx -> @/components/features/palette-swapper/color-palette-confirmation-modal"]}}),re=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(5150).then(t.bind(t,85150)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[85150]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-export-panel"]}}),oe=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(4550),t.e(1666)]).then(t.bind(t,41666)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[41666]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-qr-code"]}}),ae=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(467),t.e(2102)]).then(t.bind(t,82102)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[82102]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-embed"]}}),ie=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(8833).then(t.bind(t,88833)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[88833]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-versions"]}}),le=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(4588),t.e(1200),t.e(5710),t.e(7134),t.e(8560),t.e(5743)]).then(t.bind(t,5743)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[5743]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-segment-container"]}}),se=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(4588),t.e(1200),t.e(7134),t.e(8560),t.e(4911)]).then(t.bind(t,59149)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[59149]},modules:["animation/[id].tsx -> @/components/features/lottie-in-context/lottie-mockup-panel"]}}),ue=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(7713),t.e(7701),t.e(4976)]).then(t.bind(t,84976)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[84976]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-color-palettes"]}}),ce=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(243),t.e(8778),t.e(9229),t.e(4270),t.e(8176),t.e(5627),t.e(9455),t.e(3040),t.e(3789)]).then(t.bind(t,53789)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[53789]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-file-info"]}}),de=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then(t.bind(t,67508)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[67508]},modules:["animation/[id].tsx -> @/components/page/animation/comment/comment-pushover"]}}),fe=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(9268).then(t.bind(t,49268)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[49268]},modules:["animation/[id].tsx -> @/components/page/animation/background-color-control"]}}),me=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(4588),t.e(1200),t.e(7134)]).then(t.bind(t,87134)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[87134]},modules:["animation/[id].tsx -> @/components/features/lottie-in-context/lottie-mockup-preview"]}}),pe=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(2330),t.e(2208)]).then(t.bind(t,62330)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[62330]},modules:["animation/[id].tsx -> @/components/page/animation/player/animation-player"]}}),ve=(0,x.default)((0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(467),t.e(7767),t.e(4550),t.e(2762),t.e(9421),t.e(6540),t.e(4172),t.e(481)]).then(t.bind(t,17713)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[17713]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-header"]}}),he=function(){var e,n,t,o,a,i,d,p,x,E,he,xe,be,we,ge,ke,Ce,Ee,ye=(0,w.useState)(),je=ye[0],Oe=ye[1],Se=(0,k.useRecoilState)(W.sI),Ie=(0,r.Z)(Se,2),Me=Ie[0],Ne=Ie[1],Fe=(0,w.useState)(),Te=Fe[0],Pe=Fe[1],Re=(0,w.useState)(),qe=Re[0],Le=Re[1],_e=(0,k.useSetRecoilState)(Q.E4),Ae=(0,k.useSetRecoilState)(W.GG),Ue=(0,w.useState)(null),Ze=Ue[0],De=Ue[1],Ge=(0,w.useState)(null),Be=Ge[0],Ve=Ge[1],Ke=(0,w.useState)(!1),We=Ke[0],ze=Ke[1],Qe=(0,k.useResetRecoilState)(W.h3),He=(0,k.useResetRecoilState)(W.m9),Je=(0,k.useResetRecoilState)(W.lS),Ye=(0,k.useSetRecoilState)(H.QJ),Xe=(0,w.useState)(!1),$e=Xe[0],en=Xe[1],nn=(0,w.useRef)(!1),tn=(0,w.useRef)(!1),rn=(0,k.useSetRecoilState)(Q.qx),on=(0,w.useState)(),an=on[0],ln=on[1],sn=(0,w.useState)(null),un=sn[0],cn=sn[1],dn=(0,w.useRef)(!1),fn=(0,N.p)(),mn=(0,h.useRouter)(),pn=mn.query,vn=pn.frame,hn=pn.sort,xn=(0,Z.d)(),bn=xn.done,wn=xn.isLoaded,gn=xn.setWelcomeText,kn=xn.showChecklist,Cn=xn.showFirstPendingTask,En=xn.state,yn=mn.query,jn=yn.handback_id,On=yn.id,Sn=(0,P.a)(),In=(0,G.cF)(),Mn=In.activeWorkspaceId,Nn=In.setActiveWorkspace,Fn=In.workspaces,Tn=(0,l.SS)(c.AD.ENABLE_ANIMATION_NAVIGATION_SHORTCUTS),Pn=(0,C.aM)({query:B.wP,variables:{id:On},pause:!On}),Rn=(0,r.Z)(Pn,1)[0],qn=(0,C.aM)({query:B.xQ,variables:{id:On,sort:hn,folderId:null===(e=Rn.data)||void 0===e||null===(n=e.file.folder)||void 0===n?void 0:n.id},pause:!On||!Rn.data||!Tn.on}),Ln=(0,r.Z)(qn,1)[0],_n=(0,L.w)(),An=(0,r.Z)(_n,2),Un=An[0],Zn=An[1],Dn=(0,U._)("animation_sidebar_panel_state",{}),Gn=(0,r.Z)(Dn,1)[0],Bn=(0,w.useCallback)((function(e){e?(De(v()(e)),cn(v()(e))):(De(null),cn(null))}),[]);(0,A.Z)({key:"k",action:function(){var e;if(!Tn.off)if(null!==(e=Ln.data)&&void 0!==e&&e.fileAboveAndBelowId.nextAnimation)mn.query.id=Ln.data.fileAboveAndBelowId.nextAnimation,mn.push({pathname:mn.pathname,query:mn.query}),tn.current=!1;else if(!nn.current){var n=(0,ee.jsx)("div",{children:"No more animations to go to"});null==fn||fn.pushCustom(n,1e3,"bg-gray-900","text-white"),nn.current=!0}},dependencies:[Ln,Tn.off],takesPrecedence:!0}),(0,A.Z)({key:"j",action:function(){var e;if(!Tn.off)if(null!==(e=Ln.data)&&void 0!==e&&e.fileAboveAndBelowId.prevAnimation)mn.query.id=Ln.data.fileAboveAndBelowId.prevAnimation,mn.push({pathname:mn.pathname,query:mn.query}),nn.current=!1;else if(!tn.current){var n=(0,ee.jsx)("div",{children:"No more animations to go to"});null==fn||fn.pushCustom(n,1e3,"bg-gray-900","text-white"),tn.current=!0}},dependencies:[Ln,Tn.off],takesPrecedence:!0}),(0,w.useEffect)((function(){if(Ln.data&&Ln.data.fileAboveAndBelowId.nextAnimation&&!dn.current&&Tn.on){var e,n="next-prev-toast-".concat(null===(e=Sn.user)||void 0===e?void 0:e.id),t=localStorage.getItem(n),r=(new Date).getTime();if(!t||r-parseInt(t,10)>12096e5){localStorage.setItem(n,r.toString());var o=(0,ee.jsxs)("div",{children:["Use the ",(0,ee.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"J"})," and"," ",(0,ee.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"K"})," keys to go to the next or previous animation"]});null==fn||fn.pushCustom(o,3e3,"bg-gray-900","text-white")}dn.current=!0}}),[fn,Tn.on,null===(t=Sn.user)||void 0===t?void 0:t.id,Ln.data]),(0,w.useEffect)((function(){if(Rn.data){var e,n,t,r=null===(e=Rn.data.file.folder)||void 0===e?void 0:e.id,o=null===(n=Rn.data.file.folder)||void 0===n?void 0:n.name,a=Rn.data.file.project.id,i=Rn.data.file.project.title,l=null!==(t=Rn.data.file.project.isPrivate)&&void 0!==t&&t,s=Rn.data.file.project.workspaceId,u=Fn.some((function(e){var n;return e.id===(null===(n=Rn.data)||void 0===n?void 0:n.file.project.workspaceId)}));s&&u&&s!==Mn&&Nn(s,!1),Ye({type:r?"folder":"project",name:r?o:i,folderId:r,folderName:o,projectId:a,projectTitle:i,isPrivate:l,workspaceId:s})}}),[Rn.data,Ye,Mn,Nn,Fn]);var Vn=(0,w.useState)("#f8fafc"),Kn=Vn[0],Wn=Vn[1],zn=(0,k.useRecoilState)(W.h3),Qn=(0,r.Z)(zn,1)[0],Hn=(0,T.a)({scopes:(null==Me?void 0:Me.animationPermissionScopes)||[]}),Jn=Hn.canDownload,Yn=Hn.canFullAccess,Xn=Hn.canView,$n=(0,w.useState)({id:"",showDescOnCollection:!1,description:"",descriptionModifiedBy:null}),et=$n[0],nt=$n[1];(0,w.useEffect)((function(){var e;if((Qe(),He(),Rn.fetching&&rn(!0),!Rn.fetching)&&(rn(!1),Un===J.s.NONE&&window.innerWidth>768))if(Gn&&null!==(e=Sn.user)&&void 0!==e&&e.id&&Gn[Sn.user.id]){var n=Gn[Sn.user.id];n===J.s.LOTTIE_MOCKUP&&Zn(J.s.SEGMENT_MOCKUP),Zn(n)}else Zn(J.s.DOWNLOAD);return function(){}}),[Qe,He,Zn,Rn]);var tt=(0,w.useCallback)((function(e){try{void 0!==(0,m.H3)(e)&&Wn(e)}catch(e){Wn("#f8fafc")}}),[]);(0,w.useEffect)((function(){var e;if(null!=Qn&&Qn.fileObject){Oe(Qn.fileObject.url),Pe(Qn.fileObject.metadata),Le(Qn.fileObject.attributes),Ve(Qn.fileObject),ln(Qn.tags),tt(Qn.backgroundColor);var n=Qn.fileObject.url,t=n.substring(n.lastIndexOf("/")+1,n.indexOf("?")).split(".").pop();Ae("lottie"===t)}else if(Rn.data&&!Rn.fetching){var r;Oe(Rn.data.file.fileObject.url),Ne(Rn.data.file),_e({type:"project",id:Rn.data.file.project.id}),Pe(Rn.data.file.fileObject.metadata),Le(Rn.data.file.fileObject.attributes),Ve(Rn.data.file.fileObject),ln(Rn.data.file.currentVersion.tags),nt({id:Rn.data.file.id,showDescOnCollection:Rn.data.file.showDescOnCollection,description:Rn.data.file.description,descriptionUpdatedAt:null===(r=Rn.data.file)||void 0===r?void 0:r.descriptionUpdatedAt,descriptionModifiedBy:Rn.data.file.descriptionModifiedBy}),tt(Rn.data.file.backgroundColor);var o=Rn.data.file.fileObject.url,a=o.substring(o.lastIndexOf("/")+1,o.indexOf("?")).split(".").pop();Ae("lottie"===a)}else Rn.error&&(0,$.w)(Rn.error);if(null!==(e=Rn.data)&&void 0!==e&&e.file.upgradeRequired)throw new F.K}),[Rn,Qn,Ae,Ne,_e,tt]),(0,w.useEffect)((function(){var e;null!==(e=Rn.data)&&void 0!==e&&e.file.id&&(0,u.Z9)(new u.Aj({fileId:Rn.data.file.id,projectId:Rn.data.file.project.id,workspaceId:Rn.data.file.project.workspaceId,url:window.location.href}))}),[null===(o=Rn.data)||void 0===o?void 0:o.file.id,null===(a=Rn.data)||void 0===a?void 0:a.file.project.id,null===(i=Rn.data)||void 0===i?void 0:i.file.project.workspaceId]);var rt=(0,w.useState)(!1),ot=rt[0],at=rt[1],it=(0,w.useState)(!1),lt=it[0],st=it[1],ut=(0,g.r)(),ct=(0,k.useRecoilState)(z.vQ),dt=(0,r.Z)(ct,2)[1],ft=(0,w.useCallback)((function(){mn.query.comment&&(delete mn.query.comment,mn.push({pathname:mn.pathname,query:mn.query},void 0,{shallow:!0}))}),[mn]),mt=(0,w.useCallback)((function(){Zn(J.s.NONE),mn.query.panel&&(delete mn.query.panel,mn.push({pathname:mn.pathname,query:mn.query},void 0,{shallow:!0}))}),[mn,Zn]),pt=(0,w.useCallback)((function(e){return function(){Un===e?mt():(Zn(e),mn.query.panel!==e&&(mn.query.panel=e,mn.push({pathname:mn.pathname,query:mn.query},void 0,{shallow:!0})))}}),[mn,mt,Un,Zn]);(0,w.useEffect)((function(){dt(!1),en(!1),Bn(null),ft()}),[Un,dt,en,ft,Bn]),(0,A.Z)({key:"c",action:function(){Un!==J.s.COMMENTS?pt(J.s.COMMENTS):Un===J.s.COMMENTS&&mt()},dependencies:[pt,mt,Un]});var vt=(0,C.aM)({query:V.g,variables:{id:jn},pause:!jn}),ht=(0,r.Z)(vt,1)[0];(0,w.useEffect)((function(){Rn.data&&Me&&(Un!==J.s.COMMENTS&&mn.query.comment&&(pt(J.s.COMMENTS)(),mn.push({pathname:mn.pathname,query:mn.query},void 0,{shallow:!0})),Jn()||Un!==J.s.DOWNLOAD||pt(J.s.COMMENTS)(),Jn()||Un!==J.s.EMBED||pt(J.s.COMMENTS)(),mn.query.edit_description&&(Un!==J.s.FILE_INFO&&pt(J.s.FILE_INFO)(),en(!0),delete mn.query.edit_description,mn.replace({pathname:mn.pathname,query:mn.query},void 0,{shallow:!0})))}),[Me,Un,mn,pt,$e,Jn,Rn.data]);var xt=(0,w.useCallback)((function(){ot?(at(!1),ut.exit()):(at(!0),mt(),ut.enter())}),[mt,ut,ot]),bt=(0,w.useCallback)((function(e,n){n===ut&&at(!!e)}),[ut]);(0,w.useEffect)((function(){var e;Me&&("color-palette"!==mn.query.from||null!==(e=En.tasks[X.O.CUSTOMIZE_COLOR])&&void 0!==e&&e.done||(bn(X.O.CUSTOMIZE_COLOR),kn(!0)),"download"===mn.query.from||"embed"===mn.query.from||!wn||En.seen||En.show||(gn(En.newToOnboarding?"Welcome! Learn all about our platform’s most helpful features with this checklist ✨":"Level up your motion design game by exploring our platform’s most helpful features in this checklist ✨"),kn(!0),Cn()))}),[Me,En,bn]);var wt=(0,w.useCallback)((function(){st(!lt)}),[lt,st]),gt=(0,w.useRef)(null),kt=(0,w.useMemo)((function(){return(null==Qn?void 0:Qn.id)||(null==Me?void 0:Me.currentVersionId)||""}),[null==Qn?void 0:Qn.id,null==Me?void 0:Me.currentVersionId]),Ct=(0,w.useMemo)((function(){var e,n;return{entityId:kt,entityGroupId:(null==Me?void 0:Me.id)||On,isEnabled:null==Qn||!Qn.id||Qn.id===(null==Me?void 0:Me.currentVersionId),workspaceId:(null==Me||null===(e=Me.project)||void 0===e||null===(n=e.workspace)||void 0===n?void 0:n.id)||""}}),[kt,null==Qn?void 0:Qn.id,null==Me?void 0:Me.currentVersionId,null==Me?void 0:Me.id,null==Me||null===(d=Me.project)||void 0===d||null===(p=d.workspace)||void 0===p?void 0:p.id,On]),Et=(0,R.X0)(Ct),yt=(0,R.us)(Ct),jt=(0,R.es)(Ct),Ot=(0,R.VP)(Ct),St=(0,R.UR)(Ct),It=(0,R.OL)(Ct),Mt=(0,R._i)(Ct),Nt=(0,q.M)({entityId:Un===J.s.COMMENTS?kt:"",entityType:Y.TY.FileVersion}),Ft=Nt.canFetchMoreComments,Tt=Nt.commentsQuery,Pt=Nt.onFetchMoreComments,Rt=Nt.onHideReplies,qt=Nt.onShowReplies,Lt=Nt.parentComment,_t=Nt.pushoverMode;(0,w.useEffect)((function(){vn&&Rt(null)}),[vn,Rt]);var At=(0,_.p)({color:Kn}),Ut=(0,C.aM)({query:K.mT,variables:{id:On},pause:!On||Un!==J.s.COMMENTS}),Zt=(0,r.Z)(Ut,1)[0],Dt=(0,w.useState)(!1),Gt=Dt[0],Bt=Dt[1],Vt=(0,w.useCallback)((function(){return Bt(!0)}),[]),Kt=(0,w.useCallback)((function(){return Bt(!1)}),[]);(0,w.useEffect)((function(){Kt()}),[_t,Kt]);var Wt=(0,w.useCallback)((function(e){return function(){Un!==e&&((0,u.Z9)(new u.lF({location:e})),pt(e)())}}),[Un,pt]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(b.default,{children:(0,ee.jsx)("title",{children:(null==Me?void 0:Me.name)||"Animation"})}),(0,ee.jsxs)(y.o,{headerControl:(0,ee.jsx)(D.s,{features:null==Me?void 0:Me.features,children:(0,ee.jsx)(ve,{animation:Me,animationFetching:Rn.fetching})}),contentWrapperCssClasses:"flex overflow-hidden flex-grow",children:[Me&&(0,ee.jsxs)(D.s,{features:Me.features,children:[(0,ee.jsxs)(g.I,{className:f()({"flex flex-grow":!0}),handle:ut,onChange:bt,children:[(0,ee.jsx)("div",{className:f()({"relative flex flex-grow ":!0,"transparency-grid":lt}),children:(0,ee.jsxs)("div",{className:"relative flex w-full h-full",children:[(0,ee.jsx)("div",{className:f()({"absolute inset-0 flex flex-grow ":!0,"transparency-grid":lt}),style:{background:Kn}}),Un===J.s.LOTTIE_MOCKUP?(0,ee.jsx)("div",{className:"relative flex items-center justify-center w-full h-full overflow-auto pr-80",children:(0,ee.jsx)(me,{animation:Me,canEdit:Yn()})}):(0,ee.jsxs)("div",{className:f()("relative flex items-center justify-center w-full h-full overflow-auto",{"pr-80":Un!==J.s.NONE}),children:[je&&!Ze&&(0,ee.jsx)(pe,{showComments:!0,canComment:!Qn,mentionables:null===(x=Zt.data)||void 0===x?void 0:x.commentMentionableUsers,portalRoot:gt.current,animationUrl:je,currentDiscussion:Lt,currentUserId:null===(E=Sn.user)||void 0===E?void 0:E.id,entityId:kt,entityType:Y.TY.FileVersion,controls:!ot,isLight:At,onDeleteComment:Et,onEditComment:yt,onPostComment:jt,onReplyToComment:Ot,onResolveComment:St,onSelectReaction:It,onUnresolveComment:Mt}),je&&un&&(0,ee.jsx)(pe,{portalRoot:gt.current,animationUrl:un,controls:!ot,isLight:At}),!ot&&(0,ee.jsxs)("div",{className:f()("absolute top-0 bottom-0 flex flex-col pt-4 md:pt-8 pr-4 md:pr-8 pb-14 min-h-0",{"right-0":Un===J.s.NONE,"right-86":Un!==J.s.NONE}),children:[(0,ee.jsxs)("div",{className:"flex flex-col space-y-2","data-onboarding-id":"anim-panel-btn",children:[Xn()&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-comment-btn",children:(0,ee.jsx)(M.n,{icon:"comment",title:"Comments",shortcut:(0,ee.jsx)(I.z,{keys:["C"]}),onClick:Wt(J.s.COMMENTS),iconColorClass:Un===J.s.COMMENTS?"text-actionPrimary":"text-gray-600"})}),(0,ee.jsx)(M.n,{icon:"info",title:"Animation information",onClick:Wt(J.s.FILE_INFO),iconColorClass:Un===J.s.FILE_INFO?"text-actionPrimary":"text-gray-600"}),Yn()&&!Qn&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-color-palette-btn",children:(0,ee.jsx)(M.n,{icon:"color-palette",title:"Color Palette",onClick:Wt(J.s.COLOR_PALETTES),iconColorClass:Un===J.s.COLOR_PALETTES?"text-actionPrimary":"text-gray-600"})}),!Qn&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-segment-btn",children:(0,ee.jsx)(M.n,{icon:"segment-mockup",title:"Segments & Mockups",onClick:Wt(J.s.SEGMENT_MOCKUP),iconColorClass:Un===J.s.SEGMENT_MOCKUP?"text-actionPrimary":"text-gray-600"})}),Yn()&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-version-btn",children:(0,ee.jsx)(M.n,{icon:"history",title:"Version History",onClick:Wt(J.s.VERSIONS),iconColorClass:Un===J.s.VERSIONS?"text-actionPrimary":"text-gray-600"})}),Jn()&&!Qn&&(0,ee.jsx)(M.n,{icon:"embed",title:"Handoff & Embed",iconColorClass:Un===J.s.EMBED?"text-actionPrimary":"text-gray-600",onClick:Wt(J.s.EMBED)})]}),(0,ee.jsxs)("div",{className:"flex flex-col pt-2 pb-4 space-y-2 md:mt-auto md:py-0",children:[(0,ee.jsx)(j.s,{}),(0,ee.jsx)(M.n,{icon:"grid",title:"Transparency grid",onClick:wt,iconColorClass:lt?"text-actionPrimary":"text-gray-600"}),(0,ee.jsx)(fe,{animationBackgroundColor:Kn,canUpdate:Yn(),onChange:function(e){Wn(e)},fileId:Me.id,portalRoot:gt.current}),(0,ee.jsx)(M.n,{icon:"full-screen",title:"Full screen",onClick:xt,iconColorClass:ot?"text-actionPrimary":"text-gray-600"}),(0,ee.jsx)(O.L,{})]})]})]})]})}),(0,ee.jsx)("div",{className:"absolute bottom-0 right-0 flex flex-grow overflow-hidden top-16","data-onboarding-watch":"side_panel",children:(0,ee.jsxs)(s.uT,{show:Un!==J.s.NONE,className:f()("relative flex flex-col bg-white border-l border-gray-100 w-86",{"pb-24":En.show}),enter:"transform transition ease-in-out duration-50",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-50",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:[Un!==J.s.LOTTIE_MOCKUP&&(0,ee.jsx)("div",{className:"absolute right-6 top-6",children:(0,ee.jsx)(S.h,{name:"cross",onClick:mt,small:!0,iconLighter:!0})}),Un===J.s.COMMENTS&&(0,ee.jsx)(de,{currentUserId:null===(he=Sn.user)||void 0===he?void 0:he.id,discussions:null===(xe=Tt.data)||void 0===xe||null===(be=xe.comments)||void 0===be?void 0:be.edges,isFetchingDiscussions:Tt.fetching,isInputExpanded:Gt,mentionables:null===(we=Zt.data)||void 0===we?void 0:we.commentMentionableUsers,mode:_t,parentDiscussion:Lt,canFetchMoreComments:Ft,onCollapseInput:Kt,onFetchMoreComments:Pt,onExpandInput:Vt,onDelete:Et,onEdit:yt,onPost:jt,onReply:Ot,onReplyClick:qt,onResolve:St,onSelectReaction:It,onUnresolve:Mt}),Un===J.s.FILE_INFO&&Te&&(0,ee.jsx)(ce,{fileMetaData:Te,basicMetadata:qe,fileData:et,canEdit:Yn(),canDownload:Jn(),isEditing:Boolean(Yn()&&$e),fileUrl:je,tags:an,fileVersionId:Me.currentVersion.id,pageSource:"animation details page",thumbnailUrl:null==Be||null===(ge=Be.thumbnails)||void 0===ge||null===(ke=ge.png)||void 0===ke||null===(Ce=ke.medium)||void 0===Ce?void 0:Ce.url,animation:Me,workspaceId:Me.project.workspaceId}),Un===J.s.COLOR_PALETTES&&(0,ee.jsx)(ue,{animationUrl:je,portalRoot:gt.current,workspaceId:Me.project.workspaceId,setColorModifiedLottie:Bn,setOpenColorPaletteModal:ze}),Un===J.s.LOTTIE_MOCKUP&&(0,ee.jsx)(se,{canEdit:Yn(),animation:Me,onBackToLottieMockupList:Wt(J.s.SEGMENT_MOCKUP)}),Un===J.s.SEGMENT_MOCKUP&&(0,ee.jsx)(le,{animation:Me,showLottieMockup:Wt(J.s.LOTTIE_MOCKUP)}),Un===J.s.VERSIONS&&(0,ee.jsx)(ie,{onVersionSelected:function(){De(null),Je()},animation:Me}),Un===J.s.EMBED&&(0,ee.jsx)(ae,{canUpdatePublicAsset:Yn(),fileId:Me.id,currentVersionId:Me.currentVersionId,workspaceId:Me.project.workspaceId}),Un===J.s.QRCODE&&(0,ee.jsx)(oe,{fileUrl:Me.fileObject.url}),Un===J.s.DOWNLOAD&&qe&&(0,ee.jsx)(re,{animation:Me,basicMetadata:qe,fileMetaData:Te,source:"animation"})]})}),(0,ee.jsx)("div",{ref:gt})]}),We&&Ze&&Be&&(0,ee.jsx)(te,{currentFile:Be,currentFileId:null==Me?void 0:Me.id,projectId:null==Me||null===(Ee=Me.project)||void 0===Ee?void 0:Ee.id,lottieAnimation:v()(Ze),closeCallback:function(){ze(!1)},animationName:null==Me?void 0:Me.name,currentBackgroundColor:(null==Me?void 0:Me.backgroundColor)||"none",show:!0})]}),Me&&jn&&!ht.fetching&&ht.data&&(0,ee.jsx)(ne,{animation:Me,handback:ht.data.fileHandback})]})]})};he.getLayout=function(e){return(0,ee.jsx)(E.By,{collapsed:!0,children:e})},n.default=he},11957:function(e,n,t){t.d(n,{s:function(){return l},w:function(){return s}});var r=t(62295),o=t(29901),a=t(61250),i=o.createContext({features:[]}),l=function(e){var n=e.children,t=e.features;return(0,a.jsx)(i.Provider,{value:{features:t},children:n})},s=function(){var e=o.useContext(i).features;return e?new r.UZ(e):new r.UZ([])}},30337:function(e,n,t){t.d(n,{w:function(){return a}});var r=t(31380),o={"Access denied!":function(e){var n,t,o,a,i,l=null!==(n=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==n?n:"",s=null!==(o=null==e||null===(a=e.extensions)||void 0===a||null===(i=a.exception)||void 0===i?void 0:i.stacktrace)&&void 0!==o?o:[];throw console.log("Error code:",l),console.log("Stacktrace:",s),new r.J},"Database query failed":function(e){var n,t,o,a,i,l=null!==(n=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==n?n:"",s=null!==(o=null==e||null===(a=e.extensions)||void 0===a||null===(i=a.exception)||void 0===i?void 0:i.stacktrace)&&void 0!==o?o:[];throw console.log("Error code:",l),console.log("Stacktrace:",s),new r.J},Forbidden:function(e){var n,t,o,a,i,l=null!==(n=null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)&&void 0!==n?n:"",s=null!==(o=null==e||null===(a=e.extensions)||void 0===a||null===(i=a.exception)||void 0===i?void 0:i.stacktrace)&&void 0!==o?o:[];throw console.log("Error code:",l),console.log("Stacktrace:",s),new r.J}};function a(e){e.networkError?console.error("Network error:",e.networkError):e.graphQLErrors&&e.graphQLErrors.length>0?e.graphQLErrors.forEach((function(e){var n,t=e.message,r=Object.keys(o).find((function(e){return t.includes(e)}));r?null===(n=o[r])||void 0===n||n.call(o,e):console.error("GraphQL error:",e)})):console.error("Unknown error:",e)}},34742:function(e,n,t){t.d(n,{I:function(){return f},r:function(){return d}});var r=t(29901),o={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},a=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],i=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],l=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],s="undefined"!=typeof window&&void 0!==window.document?window.document:{},u="fullscreenEnabled"in s&&Object.keys(o)||a[0]in s&&a||i[0]in s&&i||l[0]in s&&l||[],c={requestFullscreen:function(e){return e[u[o.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[u[o.requestFullscreen]]},get exitFullscreen(){return s[u[o.exitFullscreen]].bind(s)},get fullscreenPseudoClass(){return":"+u[o.fullscreen]},addEventListener:function(e,n,t){return s.addEventListener(u[o[e]],n,t)},removeEventListener:function(e,n,t){return s.removeEventListener(u[o[e]],n,t)},get fullscreenEnabled(){return Boolean(s[u[o.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return s[u[o.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return s[("on"+u[o.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return s[("on"+u[o.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return s[("on"+u[o.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return s[("on"+u[o.fullscreenerror]).toLowerCase()]=e}};function d(){var e=(0,r.useState)(!1),n=e[0],t=e[1],o=(0,r.useRef)(null);(0,r.useEffect)((function(){var e=function(){t(c.fullscreenElement===o.current)};return c.addEventListener("fullscreenchange",e),function(){return c.removeEventListener("fullscreenchange",e)}}),[]);var a=(0,r.useCallback)((function(){return c.fullscreenElement?c.exitFullscreen().then((function(){return c.requestFullscreen(o.current)})):o.current?c.requestFullscreen(o.current):void 0}),[]),i=(0,r.useCallback)((function(){return c.fullscreenElement===o.current?c.exitFullscreen():Promise.resolve()}),[]);return(0,r.useMemo)((function(){return{active:n,enter:a,exit:i,node:o}}),[n,a,i])}var f=function(e){var n=e.handle,t=e.onChange,o=e.children,a=e.className,i=[];return a&&i.push(a),i.push("fullscreen"),n.active&&i.push("fullscreen-enabled"),(0,r.useEffect)((function(){t&&t(n.active,n)}),[n.active]),r.createElement("div",{className:i.join(" "),ref:n.node,style:n.active?{height:"100%",width:"100%"}:void 0},o)}}}]);